<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
	"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
  <title>ruby-scripting</title>

  <link rel="stylesheet" href="./css/reset.css" type="text/css"/>
  <link rel="stylesheet" href="./css/showoff.css" type="text/css"/>

  <script type="text/javascript" src="./js/jquery-1.4.2.min.js"></script>
  <script type="text/javascript" src="./js/jquery.cycle.all.js"></script>
	<script type="text/javascript" src="./js/jquery-print.js"></script>
  <script type="text/javascript" src="./js/jquery.batchImageLoad.js"></script>

  <script type="text/javascript" src="./js/jquery.doubletap-0.1.js"></script>

  <script type="text/javascript" src="./js/fg.menu.js"></script>
  <script type="text/javascript" src="./js/showoff.js"></script>
  <script type="text/javascript" src="./js/jTypeWriter.js"> </script>
  <script type="text/javascript" src="./js/sh_main.min.js"></script>
  <script type="text/javascript" src="./js/core.js"></script>
  <script type="text/javascript" src="./js/showoffcore.js"></script>

  <link type="text/css" href="./css/fg.menu.css" media="screen" rel="stylesheet" />
  <link type="text/css" href="./css/theme/ui.all.css" media="screen" rel="stylesheet" />
  <link type="text/css" href="./css/sh_style.css" rel="stylesheet" >

  
    <link rel="stylesheet" href="file/jayway.css" type="text/css"/>
  

  

  <script type="text/javascript">
  $(function(){
    setupPreso(false, './');
  });
  </script>
</head>

<body>


<a tabindex="0" href="#search-engines" class="fg-button fg-button-icon-right ui-widget ui-state-default ui-corner-all" id="navmenu"><span class="ui-icon ui-icon-triangle-1-s"></span>slides</a>
<div id="navigation" class="hidden"></div>

<div id="help">
  <table>
    <tr><td class="key">space, &rarr;</td><td>next slide</td></tr>
    <tr><td class="key">&larr;</td><td>previous slide</td></tr>
    <tr><td class="key">d</td><td>debug mode</td></tr>
    <tr><td class="key">## &lt;ret&gt;</td><td>go to slide #</td></tr>
    <tr><td class="key">c</td><td>table of contents (vi)</td></tr>
    <tr><td class="key">f</td><td>toggle footer</td></tr>
    <tr><td class="key">r</td><td>reload slides</td></tr>
    <tr><td class="key">z</td><td>toggle help (this)</td></tr>
  </table>
</div>

<div class="buttonNav">
  <input type="submit" onClick="prevStep();" value="prev"/>
  <input type="submit" onClick="nextStep();" value="next"/>
</div>

<div id="preso">loading presentation...</div>
<div id="footer">
  <span id="slideInfo"></span>
  <span id="debugInfo"></span>
  <span id="notesInfo"></span>
</div>

<div id="slides" class="offscreen" style="display:none;">
<div class="slide" data-transition="none"><div class="content" ref="slides/01_intro/1">
<h1>Ruby Scripting</h1>

<h3>anders.janmyr@jayway.com</h3>

<h3>http://anders.janmyr.com</h3>

<h3>@andersjanmyr</h3>
</div>
</div><div class="slide" data-transition="none"><div class="content bullets" ref="slides/01_intro/2">
<h1>Contents</h1>

<ul>
<li>Installation</li>
<li>Basic Script</li>
<li>String, Array, Hash, FilePath, FileUtils</li>
<li>Task</li>
</ul>

</div>
</div><div class="slide" data-transition="none"><div class="content bullets small" ref="slides/04_installation">
<h1>Installation</h1>

<ul>
<li><p>Install latest 1.9.2</p></li>
<li><p>OSX, Linux - https://rvm.beginrescueend.com/</p></li>
<li><p>Windows - http://rubyinstaller.org/</p></li>
</ul>

</div>
</div><div class="slide" data-transition="none"><div class="content code" ref="slides/10_basic_script/1">
<h1>A basic script</h1>

<pre class="sh_ruby"><code>#!/usr/bin/env ruby
# one.rb

puts ARGV</code></pre>
</div>
</div><div class="slide" data-transition="none"><div class="content commandline" ref="slides/10_basic_script/2">
<h1>Calling the script</h1>

<pre><code><code class="command">$ chmod a+x one.rb</code><code class="result">
</code><code class="command">$ ./one.rb kalle -o ville -p</code><code class="result">
kalle
-o
ville
-p
</code></code></pre>
</div>
</div><div class="slide" data-transition="none"><div class="content" ref="slides/20_libraries/1">
<h1>Basics</h1>

<pre class="sh_ruby"><code># local variable
name = 'Anders'
puts name</code></pre>
</div>
</div><div class="slide" data-transition="none"><div class="content" ref="slides/20_libraries/2">
<h1>Class</h1>

<pre class="sh_ruby"><code># class
class Tapir
end</code></pre>
</div>
</div><div class="slide" data-transition="none"><div class="content" ref="slides/20_libraries/3">
<h1>Method</h1>

<pre class="sh_ruby"><code># method, optional parenthesis
def eat food
  puts "I'm eating #{food}"
end</code></pre>
</div>
</div><div class="slide" data-transition="none"><div class="content" ref="slides/20_libraries/4">
<h1>Instance variable</h1>

<pre class="sh_ruby"><code>def save(food)
  # instance variable, created on assignment
  @food = food
end</code></pre>
</div>
</div><div class="slide" data-transition="none"><div class="content" ref="slides/20_libraries/5">
<h1>String</h1>

<pre class="sh_ruby"><code># Double quoted string support interpolation
"Hello #{Date.now}"

# Concatenation is also possible
"Hello " + name</code></pre>
</div>
</div><div class="slide" data-transition="none"><div class="content small" ref="slides/20_libraries/6">
<h1>String Methods</h1>

<pre class="sh_ruby"><code>str = 'Tapir'

str.upcase                    # TAPIR
str.gsub(gsub(/[aeiou]/, '*') # T*p*r
str.include? 'api'            # true
str.size                      # 5</code></pre>
</div>
</div><div class="slide" data-transition="none"><div class="content small" ref="slides/20_libraries/7">
<h1>Array</h1>

<pre class="sh_ruby"><code>numbers = [1, 2, 3]

number.size                 # 3
numbers &lt;&lt; 4                # mutates array[1, 2, 3, 4]
numbers.pop                 # returns 4 and mutates array into [1,2,3]
numbers.unshift 0           # mutates array into [0,1,2,3]
numbers.each { |n| puts n } # prints 0 1 2 3
numbers.map { |n| n*5}      # returns [0,5,10,15]</code></pre>
</div>
</div><div class="slide" data-transition="none"><div class="content small" ref="slides/20_libraries/8">
<h1>Hash</h1>

<pre class="sh_ruby"><code>hash = {}                           # Create a new Hash or Map

hash['foo'] = 'bar'                 # Adds key 'foo' with value 'bar'
hash['foo']                         # returns 'bar'
hash.size                           # 1
hash['tapir'] = 'beautiful'         # Add one more
hash.keys                           # returns ['foo', 'tapir']
hash.map { |key, value| key+value } # ['foobar', 'tapirbeautiful']</code></pre>
</div>
</div><div class="slide" data-transition="none"><div class="content small" ref="slides/20_libraries/9">
<h1>Pathname</h1>

<pre class="sh_ruby"><code>require 'pathname'
Pathname.getwd             # =&gt; #&lt;Pathname:/Users/andersjanmyr/Presentations/ruby-scripting/src&gt;
p1  = Pathname.new('/tmp') # =&gt; #&lt;Pathname:/tmp&gt;
p1.directory?              # =&gt; true
p2 = p1 + 'anders.txt'     # =&gt; #&lt;Pathname:/tmp/anders.txt&gt;
p2.dirname                 # =&gt; #&lt;Pathname:/tmp&gt;
p2.basename                # =&gt; #&lt;Pathname:anders.txt&gt;
p2.extname                 # =&gt; ".txt"
p2.mkpath                  # Creates the file unless it exists
p1.find { |f| p f.basename}# =&gt; #&lt;Pathname:src&gt; #&lt;Pathname:one.rb&gt; #&lt;Pathname:read_char.rb&gt;</code></pre>
</div>
</div><div class="slide" data-transition="none"><div class="content small" ref="slides/20_libraries/10">
<h1>Pathname</h1>

<pre class="sh_ruby"><code>path = Pathname.getwd + 'read_char.rb'

# Opens file, yields each line, then closes it
path.each_line do |line|
  p line if line =~ /print/
end

# "print \"Character please=&gt;\"\n"
# "print \"\\nYou pressed &gt;\", int, \"&lt;, char &gt;\", int.chr, \"&lt;\\n\"\n"</code></pre>
</div>
</div><div class="slide" data-transition="none"><div class="content small" ref="slides/20_libraries/11">
<h1>FileUtils</h1>

<pre class="sh_ruby"><code>require 'fileutils'
cd(dir, options)
pwd()
mkdir_p(dir, options)
rmdir(dir, options)
ln(old, new, options)
ln_s(old, new, options)
cp(src, dest, options)
cp_r(src, dest, options)
mv(src, dest, options)
rm(list, options)
rm_r(list, options)
rm_rf(list, options)
chmod(mode, list, options)
chown(user, group, list, options)
touch(list, options)</code></pre>
</div>
</div><div class="slide" data-transition="none"><div class="content small execute" ref="slides/20_libraries/12">
<h1>Executing commands</h1>

<pre class="sh_ruby"><code># system, executes command and returns true on success
# Output is not captured
system('ls -f')

# backticks, executes command and captures stdout as string
`ls -f` </code></pre>
</div>
</div><div class="slide" data-transition="none"><div class="content small" ref="slides/20_libraries/13">
<h1>OptionParser</h1>

<pre class="sh_ruby"><code># example.rb
require 'optparse'

options = {}
OptionParser.new do |opts|
  opts.banner = "Usage: example.rb [options]"

  opts.on("-v", "--[no-]verbose", "Run verbosely") do |v|
    options[:verbose] = v
  end
end.parse!

p options
p ARGV</code></pre>
</div>
</div><div class="slide" data-transition="none"><div class="content commandline" ref="slides/30_task/1">
<h1>Task  <code>purge</code></h1>

<h2>Recursively removes backup files</h2>

<h3>(such as tapir.rb.bak, tapir.rb~)</h3>

<pre><code><code class="command">$ purge /tmp</code><code class="result">
Removed files:
/tmp/anders/tapir.rb.bak
/tmp/tapir.rb~
</code></code></pre>
</div>
</div><div class="slide" data-transition="none"><div class="content commandline" ref="slides/30_task/2">
<h1>Task  <code>head</code></h1>

<h2>List the first n lines of a file</h2>

<pre><code><code class="command">$ head -6 README.md </code><code class="result">
My script and dotfiles.

To initiate on a new machine

* git clone bin-and-dotfile ~/bin
* ~/bin/setup_dotfiles
</code></code></pre>
</div>
</div><div class="slide" data-transition="none"><div class="content bullets small" ref="slides/99_summary/1">
<h1>Code and Slides</h1>

<h2>Presentation</h2>

<ul>
<li>http://andersjanmyr.github.com/ruby-scripting</li>
</ul>


<h2>Presentation Source</h2>

<ul>
<li>http:://github.com/andersjanmyr/ruby-scripting</li>
</ul>

</div>
</div><div class="slide" data-transition="none"><div class="content" ref="slides/99_summary/2">
<h1>Questions?</h1>

<h3>anders.janmyr@jayway.com</h3>

<h3>http://anders.janmyr.com</h3>

<h3>@andersjanmyr</h3>
</div>
</div>
</div>

</body>
</html>
